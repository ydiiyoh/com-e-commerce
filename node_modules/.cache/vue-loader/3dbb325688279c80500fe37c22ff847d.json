{"remainingRequest":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/src/components/goods/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/src/components/goods/List.vue","mtime":1644935477432},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdCcsCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmn6Xor6LliJfooajlj4LmlbAKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnk6ICcnLAogICAgICAgIHBhZ2VudW06IDEsCiAgICAgICAgcGFnZXNpemU6IDUKICAgICAgfSwKICAgICAgLy8g5ZWG5ZOB5oC75pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDllYblk4HliJfooagKICAgICAgZ29vZHNMaXN0OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOagueaNruWIhumhteiOt+WPluWvueW6lOeahOWVhuWTgeWIl+ihqAogICAgICovCiAgICBhc3luYyBnZXRHb29kc0xpc3QgKCkgewogICAgICAvKioKICAgICAgICogZ2V06K+35rGCLCDlj4LmlbDkuIrpg73liqDkuIDkuKogcGFyYW1z5bGe5oCnCiAgICAgICAqLwogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2dvb2RzJywgeyBwYXJhbXM6IHRoaXMucXVlcnlJbmZvIH0pCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bllYblk4HliJfooajlpLHotKUhJykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdvb2RzTGlzdCA9IHJlcy5kYXRhLmdvb2RzCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlIChuZXdTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VzaXplID0gbmV3U2l6ZQogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSAobmV3UGFnZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlbnVtID0gbmV3UGFnZQogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICB9LAogICAgLyoqCiAgICAgKiBAcGFyYW0gZ29vZHNJZAogICAgICovCiAgICBhc3luYyByZW1vdmVHb29kc0J5SWQgKGdvb2RzSWQpIHsKICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeWVhuWTgSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHJldHVybiBlcnIKICAgICAgfSkKICAgICAgLy8g5aaC5p6c55So5oi356Gu6K6k5Yig6ZmkLCDliJnov5Tlm57lgLzkuLrlrZfnrKbkuLIgY29uZmlybQogICAgICAvLyDlpoLmnpznlKjmiLflj5bmtojliKDpmaQsIOWImei/lOWbnuWAvOS4uuWtl+espuS4siBjYW5jZWwKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCEnKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmRlbGV0ZShgZ29vZHMvJHtnb29kc0lkfWApCiAgICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5ZWG5ZOB5aSx6LSlIScpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOmHjeaWsOiOt+WPlueUqOaIt+WIl+ihqCwg5p2l5Yi35paw6aG16Z2iCiAgICAgICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTllYblk4HmiJDlip8hJykKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIOi3s+i9rOmhtemdoua3u+WKoAogICAgICovCiAgICBnb0FkZHBhZ2UgKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2dvb2RzL2FkZCcpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/goods","sourcesContent":["<template>\n\n  <div>\n    <!--面包屑导航区域-->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!--卡片视图区域-->\n    <el-card class=\"box-card\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <!-- 搜索与添加区域 -->\n          <el-input v-model=\"queryInfo.query\" class=\"input-with-select\" clearable placeholder=\"请输入内容\"\n                    @clear=\"getGoodsList\" @keyup.enter.native=\"getGoodsList\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getGoodsList\"></el-button>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"goAddpage\">添加商品</el-button>\n        </el-col>\n      </el-row>\n\n      <!--  用户列表区域-->\n      <el-table v-loading=\"!goodsList.length\"\n                :data=\"goodsList\"\n                :stripe=\"true\"\n                border\n                element-loading-text=\"拼命加载中\"\n                width=\"100%\">\n        <el-table-column label=\"#\"\n                         type=\"index\">\n        </el-table-column>\n        <el-table-column label=\"商品名称\"\n                         prop=\"goods_name\">\n        </el-table-column>\n        <el-table-column label=\"商品价格(元)\"\n                         prop=\"goods_price\" width=\"95px\">\n        </el-table-column>\n        <el-table-column label=\"数量\"\n                         prop=\"goods_number\" width=\"70px\">\n        </el-table-column>\n        <el-table-column label=\"创建时间\"\n                         prop=\"add_time\" width=\"140px\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.add_time | dateFormat }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"状态\"\n                         prop=\"goods_state\" width=\"95px\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.goods_state === 0\" type=\"info\">未通过</el-tag>\n            <el-tag v-else-if=\"scope.row.goods_state === 1\" type=\"warning\">审核中</el-tag>\n            <el-tag v-else type=\"success\">已审核</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"130px\">\n          <template slot-scope=\"scope\">\n            <!-- 修改按钮 -->\n            <el-tooltip :enterable=\"false\" class=\"item\" content=\"修改商品\" effect=\"dark\" placement=\"top\">\n              <el-button icon=\"el-icon-edit\" size=\"mini\" type=\"primary\"\n              ></el-button>\n            </el-tooltip>\n\n            <!-- 删除按钮-->\n            <el-tooltip :enterable=\"false\" class=\"item\" content=\"删除商品\" effect=\"dark\" placement=\"top\">\n              <el-button icon=\"el-icon-delete\" size=\"mini\" type=\"danger\"\n                         @click=\"removeGoodsById(scope.row.goods_id)\"></el-button>\n            </el-tooltip>\n\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--分页区域-->\n      <el-pagination\n        :current-page=\"queryInfo.pagenum\"\n        :page-size=\"queryInfo.pagesize\"\n        :page-sizes=\"[5,10,15,20]\"\n        :total=\"total\"\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\">\n      </el-pagination>\n    </el-card>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  name: 'List',\n  data () {\n    return {\n      // 查询列表参数\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 5\n      },\n      // 商品总数\n      total: 0,\n      // 商品列表\n      goodsList: []\n    }\n  },\n  created () {\n    this.getGoodsList()\n  },\n  methods: {\n    /**\n     * 根据分页获取对应的商品列表\n     */\n    async getGoodsList () {\n      /**\n       * get请求, 参数上都加一个 params属性\n       */\n      const { data: res } = await this.$http.get('goods', { params: this.queryInfo })\n      if (res.meta.status !== 200) {\n        return this.$message.error('获取商品列表失败!')\n      } else {\n        this.goodsList = res.data.goods\n        this.total = res.data.total\n      }\n    },\n    handleSizeChange (newSize) {\n      this.queryInfo.pagesize = newSize\n      this.getGoodsList()\n    },\n    handleCurrentChange (newPage) {\n      this.queryInfo.pagenum = newPage\n      this.getGoodsList()\n    },\n    /**\n     * @param goodsId\n     */\n    async removeGoodsById (goodsId) {\n      const confirmResult = await this.$confirm('此操作将永久删除该商品, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => {\n        return err\n      })\n      // 如果用户确认删除, 则返回值为字符串 confirm\n      // 如果用户取消删除, 则返回值为字符串 cancel\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除!')\n      } else {\n        const { data: res } = await this.$http.delete(`goods/${goodsId}`)\n        if (res.meta.status !== 200) {\n          return this.$message.error('删除商品失败!')\n        } else {\n          // 重新获取用户列表, 来刷新页面\n          this.getGoodsList()\n          return this.$message.success('删除商品成功!')\n        }\n      }\n    },\n    /**\n     * 跳转页面添加\n     */\n    goAddpage () {\n      this.$router.push('/goods/add')\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n"]}]}