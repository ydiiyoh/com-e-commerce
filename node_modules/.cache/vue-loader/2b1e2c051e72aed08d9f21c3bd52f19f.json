{"remainingRequest":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/src/components/order/Order.vue?vue&type=style&index=0&id=7446d8cd&lang=less&scoped=true&","dependencies":[{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/src/components/order/Order.vue","mtime":1644935477432},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/less-loader/dist/cjs.js","mtime":1644937355957},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/blackdoctor/Downloads/0_code/web_code/com-e-commerce/vue_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtY2FzY2FkZXIgewogIHdpZHRoOiAxMDAlOwp9Cg=="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkSA;AACA;AACA","file":"Order.vue","sourceRoot":"src/components/order","sourcesContent":["<template>\n  <div>\n    <!--面包屑导航区域-->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>订单管理</el-breadcrumb-item>\n      <el-breadcrumb-item>订单列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <!--卡片视图区域-->\n    <el-card class=\"box-card\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <!-- 搜索与添加区域 -->\n          <el-input v-model=\"queryInfo.query\" class=\"input-with-select\" clearable placeholder=\"请输入内容\"\n                    @keyup.enter.native=\"getOrdersList\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getOrdersList\"></el-button>\n          </el-input>\n        </el-col>\n      </el-row>\n\n      <!--订单列表区域-->\n      <el-table v-loading=\"!orderList.length\"\n                :data=\"orderList\"\n                :stripe=\"true\"\n                border\n                element-loading-text=\"拼命加载中\"\n                width=\"100%\">\n        <el-table-column label=\"#\"\n                         type=\"index\">\n        </el-table-column>\n        <el-table-column label=\"订单编号\"\n                         prop=\"order_number\">\n        </el-table-column>\n        <el-table-column label=\"订单价格\"\n                         prop=\"order_price\">\n        </el-table-column>\n        <el-table-column label=\"是否付款\"\n                         prop=\"pay_status\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.pay_status === '1'\" type=\"success\">已付款</el-tag>\n            <el-tag v-else type=\"danger\">未付款</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"是否发货\"\n                         prop=\"is_send\">\n        </el-table-column>\n        <el-table-column label=\"下单时间\"\n                         prop=\"create_time\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.create_time | dateFormat }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-tooltip :enterable=\"false\" class=\"item\" content=\"修改地址\" effect=\"dark\" placement=\"top\">\n              <el-button icon=\"el-icon-edit\" size=\"mini\" type=\"primary\" @click=\"showBox\"></el-button>\n            </el-tooltip>\n            <el-tooltip :enterable=\"false\" class=\"item\" content=\"物流信息\" effect=\"dark\" placement=\"top\">\n              <el-button icon=\"el-icon-location\" size=\"mini\" type=\"success\"\n                         @click=\"showProgressBox(scope.row)\"></el-button>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!--分页区域-->\n      <el-pagination\n        :current-page=\"queryInfo.pagenum\"\n        :page-size=\"queryInfo.pagesize\"\n        :page-sizes=\"[5,10,15,20]\"\n        :total=\"total\"\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\">\n      </el-pagination>\n    </el-card>\n\n    <!--修改地址的对话框-->\n    <el-dialog\n      :visible.sync=\"addressVisible\"\n      title=\"修改地址\"\n      width=\"35%\"\n      @close=\"addressDialogClosed\">\n      <el-form ref=\"addressFormRef\" :model=\"addressForm\" :rules=\"addressFormRules\"\n               label-width=\"100px\">\n        <el-form-item label=\"省市区/县\" prop=\"address1\">\n          <el-cascader\n            v-model=\"addressForm.address1\"\n            :options=\"cityData\"\n            :props=\"cityProps\"\n            clearable\n            expand-trigger=\"hover\"\n          ></el-cascader>\n        </el-form-item>\n        <el-form-item label=\"详细地址\" prop=\"detailAdd\">\n          <el-input v-model=\"addressForm.detailAdd\"></el-input>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n    <!-- 展示物流进度的对话框 -->\n    <el-dialog\n      :visible.sync=\"progressVisible\"\n      title=\"物流进度\"\n      width=\"35%\">\n      <!--时间线\n        reverse=\"true\" 表示为倒序\n      -->\n      <el-timeline :reverse=\"true\">\n        <el-timeline-item\n          v-for=\"(activity, index) in progressInfo\"\n          :key=\"index\"\n          :timestamp=\"activity.time\">\n          {{ activity.context }}\n        </el-timeline-item>\n      </el-timeline>\n      <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"progressVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"progressVisible = false\">确 定</el-button>\n        </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n\nimport cityData from '../../utils/citydata'\n\nexport default {\n  name: 'Order',\n  data () {\n    return {\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 10\n      },\n      total: 0,\n      orderList: [],\n      addressVisible: false,\n      addressForm: {\n        address1: [],\n        detailAdd: ''\n      },\n      addressFormRules: {\n        address1: [\n          {\n            required: true,\n            message: '请选择省市区/县',\n            trigger: 'blur'\n          }\n        ],\n        detailAdd: [\n          {\n            required: true,\n            message: '请选择详细地址',\n            trigger: 'blur'\n          }\n        ]\n      },\n      // 省市区/县地址\n      cityData: cityData,\n      cityProps: {\n        // 从el-cascader标签的属性,中移动到这个cascadeProps中\n        expandTrigger: 'hover'\n      },\n      progressVisible: false,\n      progressInfo: []\n    }\n  },\n  created () {\n    this.getOrdersList()\n  },\n  methods: {\n    /**\n     * 获取订单列表\n     */\n    async getOrdersList () {\n      const { data: res } = await this.$http.get('orders', { params: this.queryInfo })\n      if (res.meta.status !== 200) {\n        return this.$http.error('获取订单列表失败!')\n      } else {\n        this.total = res.data.total\n        this.orderList = res.data.goods\n      }\n    },\n    handleSizeChange (newSize) {\n      this.queryInfo.pagesize = newSize\n      this.getOrdersList()\n    },\n    handleCurrentChange (newPage) {\n      this.queryInfo.pagenum = newPage\n      this.getOrdersList()\n    },\n    /**\n     * 展示修改地址\n     */\n    showBox () {\n      this.addressVisible = true\n    },\n    /**\n     * 监听 修改对话框的事件\n     */\n    addressDialogClosed () {\n      this.$refs.addressFormRef.resetFields()\n    },\n    /**\n     * 获取物流信息\n     * @returns {Promise<*>}\n     */\n    async showProgressBox (row) {\n      // 这部分有问题\n      // const { data: res } = await this.$http.get('/kuaidi/804909574412544580')\n      // if (res.meta.status !== 200) {\n      //   return this.$http.error('获取物流信息失败')\n      // }\n\n      this.progressInfo = [\n        {\n          time: '2018-05-10 09:39:00',\n          ftime: '2018-05-10 09:39:00',\n          context: '已签收,感谢使用顺丰,期待再次为您服务',\n          location: ''\n        },\n        {\n          time: '2018-05-10 08:23:00',\n          ftime: '2018-05-10 08:23:00',\n          context: '[北京市]北京海淀育新小区营业点派件员 顺丰速运 95338正在为您派件',\n          location: ''\n        },\n        {\n          time: '2018-05-10 07:32:00',\n          ftime: '2018-05-10 07:32:00',\n          context: '快件到达 [北京海淀育新小区营业点]',\n          location: ''\n        },\n        {\n          time: '2018-05-10 02:03:00',\n          ftime: '2018-05-10 02:03:00',\n          context: '快件在[北京顺义集散中心]已装车,准备发往 [北京海淀育新小区营业点]',\n          location: ''\n        },\n        {\n          time: '2018-05-09 23:05:00',\n          ftime: '2018-05-09 23:05:00',\n          context: '快件到达 [北京顺义集散中心]',\n          location: ''\n        },\n        {\n          time: '2018-05-09 21:21:00',\n          ftime: '2018-05-09 21:21:00',\n          context: '快件在[北京宝胜营业点]已装车,准备发往 [北京顺义集散中心]',\n          location: ''\n        },\n        {\n          time: '2018-05-09 13:07:00',\n          ftime: '2018-05-09 13:07:00',\n          context: '顺丰速运 已收取快件',\n          location: ''\n        },\n        {\n          time: '2018-05-09 12:25:03',\n          ftime: '2018-05-09 12:25:03',\n          context: '卖家发货',\n          location: ''\n        },\n        {\n          time: '2018-05-09 12:22:24',\n          ftime: '2018-05-09 12:22:24',\n          context: '您的订单将由HLA（北京海淀区清河中街店）门店安排发货。',\n          location: ''\n        },\n        {\n          time: '2018-05-08 21:36:04',\n          ftime: '2018-05-08 21:36:04',\n          context: '商品已经下单',\n          location: ''\n        }\n      ]\n      // console.log(this.progressInfo)\n      this.progressVisible = true\n    }\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n.el-cascader {\n  width: 100%;\n}\n</style>\n"]}]}